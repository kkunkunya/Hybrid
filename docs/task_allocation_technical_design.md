# å¤šUAV-USVååŒä»»åŠ¡åˆ†é…ç³»ç»ŸæŠ€æœ¯è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯
- **åˆ›å»ºæ—¥æœŸ**: 2025-06-22
- **ç‰ˆæœ¬**: v2.0
- **ä½œè€…**: é¡¹ç›®å¼€å‘å›¢é˜Ÿ
- **ç›®çš„**: è¯¦ç»†è®°å½•ä»»åŠ¡åˆ†é…ç³»ç»Ÿçš„æŠ€æœ¯æ¶æ„å’Œå®ç°æ–¹æ¡ˆ
- **æœ€æ–°æ›´æ–°**: 2025-06-22 - æ”¹è¿›Layer 1ç®—æ³•ä»¥æ”¯æŒå¤šä»»åŠ¡åˆ†é…

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

### é—®é¢˜å®šä¹‰
è®¾è®¡ä¸€ä¸ªèƒ½æºçº¦æŸä¸‹çš„å¤šUAV-USVååŒä»»åŠ¡åˆ†é…ç³»ç»Ÿï¼Œéœ€è¦è§£å†³ï¼š
1. **UAVä»»åŠ¡åˆ†é…**ï¼šåœ¨ç”µé‡é™åˆ¶ä¸‹åˆç†åˆ†é…å·¡æ£€ä»»åŠ¡
2. **USVåå‹¤è°ƒåº¦**ï¼šæ™ºèƒ½å†³ç­–æ”¯æ´å“ªäº›éœ€è¦å……ç”µçš„UAV
3. **å……ç”µç­–ç•¥ä¼˜åŒ–**ï¼šUAVé€‰æ‹©å……ç”µæ¡©è¿˜æ˜¯USVå……ç”µçš„å†³ç­–
4. **åŠ¨æ€é‡è°ƒåº¦**ï¼šè¿è¡Œæ—¶æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´åˆ†é…æ–¹æ¡ˆ

### æŠ€æœ¯æŒ‘æˆ˜
- å¤šçº¦æŸä¼˜åŒ–ï¼šèƒ½æºã€æ—¶é—´ã€è·ç¦»ã€ä¼˜å…ˆçº§
- å®æ—¶æ€§è¦æ±‚ï¼šåŠ¨æ€ç¯å¢ƒä¸‹çš„å¿«é€Ÿå†³ç­–
- å¤šæ™ºèƒ½ä½“åè°ƒï¼šUAVä¸USVä¹‹é—´çš„ååŒ
- ä¸ç¡®å®šæ€§å¤„ç†ï¼šç”µé‡æ¶ˆè€—ã€ä»»åŠ¡æ‰§è¡Œæ—¶é—´çš„é¢„æµ‹

## ğŸ—ï¸ æ€»ä½“æ¶æ„ï¼šåˆ†å±‚ä¼˜åŒ–ç®—æ³•

### è®¾è®¡ç†å¿µ
é‡‡ç”¨**åˆ†è€Œæ²»ä¹‹**çš„ç­–ç•¥ï¼Œå°†å¤æ‚çš„å¤šçº¦æŸä¼˜åŒ–é—®é¢˜åˆ†è§£ä¸º4ä¸ªç›¸äº’åè°ƒçš„å­é—®é¢˜ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Layer 4                           â”‚
â”‚            åŠ¨æ€é‡è°ƒåº¦ç®¡ç†å™¨                          â”‚
â”‚        (äº‹ä»¶é©±åŠ¨ + æ»‘åŠ¨çª—å£é‡è§„åˆ’)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Layer 3                           â”‚
â”‚             å……ç”µå†³ç­–ä¼˜åŒ–å™¨                           â”‚
â”‚      (å¤šå› å­å¯å‘å¼å†³ç­–æ ‘ + å®æ—¶è¯„åˆ†)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Layer 2                           â”‚
â”‚            USVåå‹¤æ™ºèƒ½è°ƒåº¦å™¨                         â”‚
â”‚        (åŠ¨æ€è§„åˆ’ + å¯å‘å¼è´ªå¿ƒç­–ç•¥)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Layer 1                           â”‚
â”‚            èƒ½æºæ„ŸçŸ¥ä»»åŠ¡åˆ†é…å™¨                        â”‚
â”‚     (æ”¹è¿›è´ªå¿ƒå¤šä»»åŠ¡åˆ†é… + èƒ½æºçº¦æŸ)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Layer 1: èƒ½æºæ„ŸçŸ¥ä»»åŠ¡åˆ†é…å™¨

### ç®—æ³•é€‰æ‹©ï¼šæ”¹è¿›çš„è´ªå¿ƒå¤šä»»åŠ¡åˆ†é…ç®—æ³•ï¼ˆv2.0æ›´æ–°ï¼‰
**åŸå› **ï¼š
- æ”¯æŒä¸€å¯¹å¤šåˆ†é…ï¼ˆä¸€ä¸ªUAVå¯æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼‰
- æ—¶é—´å¤æ‚åº¦O(nÂ²m)ï¼Œnä¸ºUAVæ•°ï¼Œmä¸ºä»»åŠ¡æ•°
- è€ƒè™‘UAVç”µæ± å®¹é‡å’Œä»»åŠ¡é“¾èƒ½è€—
- å®æ—¶æ€§å¼ºï¼Œé€‚åˆåŠ¨æ€ç¯å¢ƒ

### æ ¸å¿ƒåˆ›æ–°

#### 1. å¤šç›®æ ‡æˆæœ¬å‡½æ•°è®¾è®¡
```python
Cost(UAV_i, Task_j) = Î±Ã—è·ç¦»æˆæœ¬ + Î²Ã—èƒ½è€—æˆæœ¬ + Î³Ã—æ—¶é—´æˆæœ¬ + Î´Ã—é£é™©æˆæœ¬

å…¶ä¸­ï¼š
- è·ç¦»æˆæœ¬ = euclidean_distance(uav.position, task.position)
- èƒ½è€—æˆæœ¬ = energy_calculator.estimate_consumption(uav, task)  
- æ—¶é—´æˆæœ¬ = é£è¡Œæ—¶é—´ + ä»»åŠ¡æ‰§è¡Œæ—¶é—´
- é£é™©æˆæœ¬ = ç¯å¢ƒé£é™©å› å­(å¤©æ°”ã€éšœç¢ç‰©ç­‰)
```

#### 2. è‡ªé€‚åº”æƒé‡æœºåˆ¶
```python
æƒé‡è°ƒæ•´ç­–ç•¥ï¼š
- ç³»ç»Ÿè´Ÿè½½é«˜ â†’ æé«˜æ—¶é—´æƒé‡Î³ï¼Œä¼˜å…ˆå¿«é€Ÿå®Œæˆ
- ç”µé‡æ™®éåä½ â†’ æé«˜èƒ½è€—æƒé‡Î²ï¼ŒèŠ‚èƒ½ä¼˜å…ˆ  
- ä»»åŠ¡ä¼˜å…ˆçº§å·®å¼‚å¤§ â†’ æé«˜é£é™©æƒé‡Î´ï¼Œä¼˜å…ˆé‡è¦ä»»åŠ¡
- å‡è¡¡çŠ¶æ€ â†’ è·ç¦»æƒé‡Î±æœ€é«˜ï¼Œå‡å°‘æ€»é‡Œç¨‹
```

#### 3. ç¡¬çº¦æŸæ£€æŸ¥
```python
çº¦æŸæ¡ä»¶ï¼š
1. UAVå‰©ä½™ç”µé‡ >= åˆ†é…ä»»åŠ¡æ€»éœ€æ±‚ Ã— (1 + å®‰å…¨ç³»æ•°)
2. ä»»åŠ¡æ‰§è¡Œæ—¶é—´çª—å£æ»¡è¶³
3. UAVè´Ÿè½½ä¸è¶…è¿‡æœ€å¤§ä»»åŠ¡æ•°é‡
4. å…³é”®ä»»åŠ¡å¿…é¡»åˆ†é…ç»™æŒ‡å®šç±»å‹UAV
5. ä»»åŠ¡é“¾èƒ½è€—ç´¯ç§¯æ£€æŸ¥ï¼ˆv2.0æ–°å¢ï¼‰
```

#### 4. å¤šä»»åŠ¡åˆ†é…ç­–ç•¥ï¼ˆv2.0æ–°å¢ï¼‰
```python
æ”¹è¿›çš„è´ªå¿ƒåˆ†é…æµç¨‹ï¼š
1. åˆå§‹åŒ–ï¼šæ¯ä¸ªUAVåˆ†é…åˆ—è¡¨ä¸ºç©º
2. è¿­ä»£åˆ†é…ï¼š
   while å­˜åœ¨æœªåˆ†é…ä»»åŠ¡ and æœªè¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°:
       for each UAV:
           if UAVå·²è¾¾åˆ°æœ€å¤§ä»»åŠ¡æ•°: continue
           è®¡ç®—UAVå‰©ä½™èƒ½é‡ï¼ˆè€ƒè™‘å·²åˆ†é…ä»»åŠ¡ï¼‰
           if å‰©ä½™èƒ½é‡ä¸è¶³æœ€å°é¢„ç•™: continue
           æ‰¾åˆ°æˆæœ¬æœ€ä½çš„æœªåˆ†é…ä»»åŠ¡
           if å¯ä»¥å®‰å…¨æ‰§è¡Œè¯¥ä»»åŠ¡:
               åˆ†é…ä»»åŠ¡ç»™UAV
               æ›´æ–°UAVçŠ¶æ€å’Œä»»åŠ¡çŠ¶æ€
3. éªŒè¯å’Œè°ƒæ•´æœ€ç»ˆåˆ†é…æ–¹æ¡ˆ
```

### æŠ€æœ¯å®ç°æ¡†æ¶
```python
class EnergyAwareTaskAllocator(BaseScheduler):
    def __init__(self, config):
        self.cost_weights = {
            "distance": 0.3, 
            "energy": 0.4, 
            "time": 0.2, 
            "risk": 0.1
        }
        self.safety_margin = 0.25  # 25%å®‰å…¨ä½™é‡
        self.energy_calculator = EnergyCalculator()
    
    def allocate(self, uavs, tasks, environment):
        # æ ¸å¿ƒæµç¨‹
        return self._execute_allocation_pipeline(uavs, tasks, environment)
```

## ğŸ“ Layer 2: USVåå‹¤æ™ºèƒ½è°ƒåº¦å™¨

### ç®—æ³•é€‰æ‹©ï¼šåŠ¨æ€è§„åˆ’ + è´ªå¿ƒç­–ç•¥ç»„åˆ
**åŸå› **ï¼š
- åŠ¨æ€è§„åˆ’ï¼šå¤„ç†USVè·¯å¾„è§„åˆ’çš„æœ€ä¼˜å­ç»“æ„
- è´ªå¿ƒç­–ç•¥ï¼šå¿«é€Ÿå“åº”ç´§æ€¥æ”¯æ´è¯·æ±‚

### æ ¸å¿ƒåˆ›æ–°

#### 1. æ”¯æ´æ•ˆç›Šè¯„ä¼°æ¨¡å‹
```python
Support_Benefit(USV_i, UAV_j) = æ‹¯æ•‘ä»»åŠ¡ä»·å€¼ / USVæ”¯æ´æˆæœ¬

å…¶ä¸­ï¼š
- æ‹¯æ•‘ä»»åŠ¡ä»·å€¼ = Î£(task.priority Ã— task.completion_probability)
- USVæ”¯æ´æˆæœ¬ = ç§»åŠ¨èƒ½è€— + å……ç”µèƒ½è€— + è¿”å›åŸºåœ°èƒ½è€— + æ—¶é—´æˆæœ¬
```

#### 2. USVè‡ªèº«ç”µé‡ç®¡ç†ç­–ç•¥
```python
USVç”µé‡ç®¡ç†åŸåˆ™ï¼š
1. é¢„ç•™è¿”å›åŸºåœ°ç”µé‡ï¼šreserve_energy = distance_to_base Ã— energy_rate Ã— 1.3
2. æ”¯æ´èƒ½åŠ›è¯„ä¼°ï¼šavailable_energy = current_energy - reserve_energy  
3. ä¼˜å…ˆçº§æ’åºï¼šemergency_level Ã— support_benefit / support_cost
4. å……ç”µæ—¶æœºï¼šå½“available_energy < min_support_thresholdæ—¶è¿”å›å……ç”µ
```

#### 3. å¤šUSVåè°ƒæœºåˆ¶
```python
åè°ƒç­–ç•¥ï¼š
- é¿å…å¤šä¸ªUSVæ”¯æ´åŒä¸€UAVï¼ˆé™¤éç´§æ€¥æƒ…å†µï¼‰
- åŒºåŸŸåˆ†å·¥ï¼šæ ¹æ®æµ·åŸŸåˆ’åˆ†USVè´£ä»»åŒº
- è´Ÿè½½å‡è¡¡ï¼šæ”¯æ´ä»»åŠ¡æ•°é‡å°½é‡å¹³å‡åˆ†é…
- å¤‡ç”¨æœºåˆ¶ï¼šè‡³å°‘ä¿æŒä¸€ä¸ªUSVå¤„äºå¾…å‘½çŠ¶æ€
```

## ğŸ“ Layer 3: å……ç”µå†³ç­–ä¼˜åŒ–å™¨

### ç®—æ³•é€‰æ‹©ï¼šå¤šå› å­å¯å‘å¼å†³ç­–æ ‘
**åŸå› **ï¼š
- å¯è§£é‡Šæ€§å¼ºï¼Œä¾¿äºè°ƒè¯•å’Œä¼˜åŒ–
- è®¡ç®—é€Ÿåº¦å¿«ï¼Œé€‚åˆå®æ—¶å†³ç­–
- æ˜“äºæ·»åŠ æ–°çš„å†³ç­–å› å­

### æ ¸å¿ƒåˆ›æ–°

#### 1. ç»¼åˆè¯„åˆ†æ¨¡å‹
```python
å†³ç­–å› å­æƒé‡åˆ†é…ï¼š
- è·ç¦»å› å­ (30%)ï¼šåˆ°å……ç”µæ¡© vs åˆ°æœ€è¿‘USVçš„è·ç¦»æ¯”è¾ƒ
- æ’é˜Ÿå› å­ (25%)ï¼šå……ç”µæ¡©å½“å‰æ’é˜Ÿæƒ…å†µå’Œé¢„è®¡ç­‰å¾…æ—¶é—´  
- å¯ç”¨æ€§å› å­ (25%)ï¼šUSVå½“å‰çŠ¶æ€å’Œå¯æ”¯æ´èƒ½åŠ›
- ç´§æ€¥åº¦å› å­ (20%)ï¼šUAVå½“å‰ç”µé‡ç™¾åˆ†æ¯”å’Œå‰©ä½™ä»»åŠ¡é‡è¦æ€§
```

#### 2. åŠ¨æ€é˜ˆå€¼è°ƒæ•´
```python
é˜ˆå€¼è°ƒæ•´ç­–ç•¥ï¼š
- ç³»ç»Ÿç¹å¿™æ—¶ï¼šé™ä½USVå……ç”µé˜ˆå€¼ï¼Œä¼˜å…ˆä½¿ç”¨å……ç”µæ¡©
- å……ç”µæ¡©æ’é˜Ÿä¸¥é‡ï¼šæé«˜USVå……ç”µæƒé‡
- USVæ•°é‡ä¸è¶³ï¼šæé«˜å……ç”µæ¡©ä½¿ç”¨ä¼˜å…ˆçº§
- ç´§æ€¥æƒ…å†µï¼šæ— è§†æ’é˜Ÿï¼Œå¼ºåˆ¶ä½¿ç”¨æœ€è¿‘å……ç”µæ–¹å¼
```

#### 3. æ’é˜Ÿæ—¶é—´é¢„æµ‹ç®—æ³•
```python
é¢„æµ‹æ¨¡å‹ï¼š
1. å†å²æ•°æ®åˆ†æï¼šè¿‡å»Nå°æ—¶çš„å……ç”µæ¡©ä½¿ç”¨æ¨¡å¼
2. å½“å‰é˜Ÿåˆ—çŠ¶æ€ï¼šæ’é˜ŸUAVæ•°é‡å’Œé¢„è®¡å……ç”µæ—¶é—´
3. è¶‹åŠ¿é¢„æµ‹ï¼šåŸºäºå½“å‰ç³»ç»Ÿè´Ÿè½½é¢„æµ‹æœªæ¥15åˆ†é’Ÿæ’é˜Ÿæƒ…å†µ
4. ä¸ç¡®å®šæ€§å¤„ç†ï¼šæ·»åŠ ç½®ä¿¡åŒºé—´ï¼Œä¿å®ˆä¼°è®¡æ’é˜Ÿæ—¶é—´
```

## ğŸ“ Layer 4: åŠ¨æ€é‡è°ƒåº¦ç®¡ç†å™¨

### ç®—æ³•é€‰æ‹©ï¼šäº‹ä»¶é©±åŠ¨ + æ»‘åŠ¨çª—å£é‡è§„åˆ’
**åŸå› **ï¼š
- äº‹ä»¶é©±åŠ¨ï¼šåŠæ—¶å“åº”ç³»ç»ŸçŠ¶æ€å˜åŒ–
- æ»‘åŠ¨çª—å£ï¼šå¹³è¡¡è®¡ç®—æˆæœ¬å’Œè§„åˆ’è´¨é‡

### æ ¸å¿ƒåˆ›æ–°

#### 1. æ™ºèƒ½è§¦å‘æœºåˆ¶
```python
è§¦å‘æ¡ä»¶å±‚æ¬¡ï¼š
çº§åˆ«1 - ç«‹å³è§¦å‘ï¼š
  - UAVç”µé‡ä½äºä¸´ç•Œé˜ˆå€¼(<15%)
  - ä»»åŠ¡æ‰§è¡Œå¤±è´¥éœ€è¦é‡æ–°åˆ†é…
  - è®¾å¤‡æ•…éšœ(UAV/USVå¤±æ•ˆ)

çº§åˆ«2 - å»¶è¿Ÿè§¦å‘(5åˆ†é’Ÿå†…)ï¼š
  - æ–°çš„é«˜ä¼˜å…ˆçº§ä»»åŠ¡åˆ°è¾¾
  - ç”µé‡æ¶ˆè€—è¶…å‡ºé¢„æœŸ20%ä»¥ä¸Š
  - USVæ”¯æ´è¯·æ±‚ç§¯å‹

çº§åˆ«3 - å‘¨æœŸæ€§è§¦å‘(15åˆ†é’Ÿ)ï¼š
  - ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ä¸‹é™
  - è´Ÿè½½ä¸å‡è¡¡ä¸¥é‡
  - ç¯å¢ƒæ¡ä»¶æ˜¾è‘—å˜åŒ–
```

#### 2. å±€éƒ¨vså…¨å±€é‡è°ƒåº¦å†³ç­–
```python
å†³ç­–è§„åˆ™ï¼š
å±€éƒ¨è°ƒæ•´(å½±å“<30%æ™ºèƒ½ä½“)ï¼š
  - å•ä¸ªUAVç”µé‡ä¸è¶³ â†’ ä»»åŠ¡è½¬ç§»ç»™é‚»è¿‘UAV
  - USVæ”¯æ´å•ä¸ªUAV â†’ è°ƒæ•´USVè·¯å¾„è§„åˆ’
  - å……ç”µæ¡©æ’é˜Ÿ â†’ å¼•å¯¼éƒ¨åˆ†UAVåˆ°å…¶ä»–å……ç”µç‚¹

å…¨å±€é‡è°ƒåº¦(å½±å“>=30%æ™ºèƒ½ä½“)ï¼š
  - å¤šä¸ªUAVåŒæ—¶ç”µé‡ä¸è¶³
  - ç³»ç»Ÿä»»åŠ¡å®Œæˆç‡<80%
  - ç¯å¢ƒæ¡ä»¶å‰§å˜(æ¶åŠ£å¤©æ°”)
```

#### 3. å¹³æ»‘è¿‡æ¸¡ç®—æ³•
```python
è¿‡æ¸¡ç­–ç•¥ï¼š
1. ä»»åŠ¡çŠ¶æ€ä¿æŠ¤ï¼šæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ä¸è¢«æ‰“æ–­
2. æ¸è¿›å¼è°ƒæ•´ï¼šåˆ†æ‰¹æ¬¡è°ƒæ•´ï¼Œé¿å…ç³»ç»Ÿéœ‡è¡  
3. å›æ»šæœºåˆ¶ï¼šæ–°æ–¹æ¡ˆæ•ˆæœä¸ä½³æ—¶èƒ½å¿«é€Ÿå›åˆ°åŸæ–¹æ¡ˆ
4. å½±å“æœ€å°åŒ–ï¼šä¼˜å…ˆè°ƒæ•´ç©ºé—²æˆ–å³å°†å®Œæˆä»»åŠ¡çš„æ™ºèƒ½ä½“
```

## ğŸ”§ å…³é”®ç®—æ³•ç»†èŠ‚

### 1. å¤šä»»åŠ¡åˆ†é…æ ¸å¿ƒç®—æ³•ï¼ˆv2.0æ›´æ–°ï¼‰
```python
def solve_multi_task_assignment(uavs, tasks, environment):
    """æ”¹è¿›çš„è´ªå¿ƒå¤šä»»åŠ¡åˆ†é…ç®—æ³•"""
    assignment = {uav_id: [] for uav_id in uavs}
    assigned_tasks = set()
    
    # æ„å»ºæˆæœ¬çŸ©é˜µ
    cost_matrix = build_enhanced_cost_matrix(uavs, tasks, environment)
    
    for i, uav in enumerate(uavs):
        for j, task in enumerate(tasks):
            # åŸºç¡€æˆæœ¬è®¡ç®—
            distance_cost = euclidean_distance(uav.position, task.position)
            energy_cost = energy_calculator.estimate_total_consumption(uav, task)
            time_cost = distance_cost / uav.cruise_speed + task.duration
            
            # ç¯å¢ƒé£é™©è¯„ä¼°
            risk_cost = environment.assess_risk(task.position, uav.type)
            
            # è‡ªé€‚åº”æƒé‡
            weights = adapt_weights(system_state)
            
            # ç»¼åˆæˆæœ¬
            matrix[i][j] = (weights.distance * distance_cost + 
                           weights.energy * energy_cost +
                           weights.time * time_cost +
                           weights.risk * risk_cost)
    
    return matrix
```

### 2. ä»»åŠ¡é“¾èƒ½è€—è®¡ç®—ï¼ˆv2.0æ–°å¢ï¼‰
```python
def calculate_task_chain_energy(uav, task_sequence):
    """è®¡ç®—æ‰§è¡Œä»»åŠ¡åºåˆ—çš„æ€»èƒ½è€—"""
    total_energy = 0
    current_pos = uav.position
    
    for task in task_sequence:
        # ç§»åŠ¨èƒ½è€—
        travel_energy = calculate_movement_energy(
            current_pos, task.position, uav.cruise_speed
        )
        # ä»»åŠ¡æ‰§è¡Œèƒ½è€—
        task_energy = calculate_task_energy(
            task.duration, task.intensity
        )
        total_energy += travel_energy + task_energy
        current_pos = task.position
    
    # è¿”å›åŸºåœ°èƒ½è€—
    return_energy = calculate_return_energy(current_pos, uav.home_base)
    total_energy += return_energy
    
    return total_energy
```

### 3. çº¦æŸæ£€æŸ¥ç®—æ³•
```python
def validate_energy_feasibility(assignment, uavs, tasks):
    """éªŒè¯åˆ†é…æ–¹æ¡ˆçš„èƒ½æºå¯è¡Œæ€§"""
    for uav_id, task_ids in assignment.items():
        uav = uavs[uav_id]
        assigned_tasks = [tasks[tid] for tid in task_ids]
        
        # è®¡ç®—æ€»èƒ½è€—éœ€æ±‚
        total_energy_needed = 0
        current_pos = uav.position
        
        for task in assigned_tasks:
            # ç§»åŠ¨åˆ°ä»»åŠ¡ç‚¹çš„èƒ½è€—
            travel_energy = energy_calculator.calculate_movement_energy(
                uav.type, distance(current_pos, task.position), uav.cruise_speed
            )
            
            # ä»»åŠ¡æ‰§è¡Œèƒ½è€—
            task_energy = energy_calculator.calculate_task_energy(
                uav.type, task.duration, task.intensity
            )
            
            total_energy_needed += travel_energy + task_energy
            current_pos = task.position
        
        # è¿”å›åŸºåœ°æˆ–æœ€è¿‘å……ç”µç‚¹çš„èƒ½è€—
        return_energy = min(
            energy_calculator.calculate_return_energy(current_pos, charging_stations),
            energy_calculator.calculate_return_energy(current_pos, uav.home_base)
        )
        
        total_energy_needed += return_energy
        
        # å®‰å…¨ä½™é‡æ£€æŸ¥
        required_energy = total_energy_needed * (1 + safety_margin)
        
        if uav.current_energy < required_energy:
            # åˆ†é…ä¸å¯è¡Œï¼Œéœ€è¦è°ƒæ•´
            assignment = adjust_assignment(assignment, uav_id, task_ids)
    
    return assignment
```

### 3. USVæ”¯æ´æ•ˆç›Šè®¡ç®—
```python
def calculate_support_benefit(usv, target_uav, environment):
    """è®¡ç®—USVæ”¯æ´ç‰¹å®šUAVçš„æ•ˆç›Š"""
    
    # å¯æ‹¯æ•‘çš„ä»»åŠ¡ä»·å€¼
    at_risk_tasks = [task for task in target_uav.assigned_tasks 
                     if predict_task_failure_risk(target_uav, task) > 0.5]
    
    rescuable_value = sum(task.priority * task.completion_probability 
                         for task in at_risk_tasks)
    
    # USVæ”¯æ´æˆæœ¬è®¡ç®—
    travel_distance = distance(usv.position, target_uav.position)
    travel_energy = energy_calculator.calculate_movement_energy(
        AgentType.USV, travel_distance, usv.cruise_speed
    )
    
    # å……ç”µèƒ½é‡è½¬ç§»æˆæœ¬
    charging_energy = min(target_uav.energy_deficit, usv.available_charging_capacity)
    
    # è¿”å›åŸºåœ°æˆæœ¬
    return_distance = distance(target_uav.position, usv.home_base)
    return_energy = energy_calculator.calculate_movement_energy(
        AgentType.USV, return_distance, usv.cruise_speed
    )
    
    total_cost = travel_energy + charging_energy + return_energy
    
    # æ—¶é—´æˆæœ¬
    time_cost = (travel_distance / usv.cruise_speed + 
                charging_energy / usv.charging_rate +
                return_distance / usv.cruise_speed)
    
    # ç»¼åˆæ•ˆç›Šè®¡ç®—
    if total_cost > 0:
        return rescuable_value / (total_cost + time_cost * time_weight)
    else:
        return float('inf')  # æ— æˆæœ¬æ”¯æ´ï¼Œæ•ˆç›Šæ— é™å¤§
```

## ğŸ“Š æ€§èƒ½è¯„ä¼°ä½“ç³»

### ç³»ç»Ÿçº§æŒ‡æ ‡
```python
system_metrics = {
    "task_completion_rate": completed_tasks / total_tasks,
    "total_energy_consumption": sum(agent.energy_consumed for agent in all_agents),
    "average_completion_time": mean(task.completion_time for task in completed_tasks),
    "uav_utilization_rate": sum(uav.active_time) / (len(uavs) * total_time),
    "usv_support_success_rate": successful_supports / total_support_requests,
    "system_efficiency": task_completion_rate / total_energy_consumption
}
```

### æ™ºèƒ½ä½“çº§æŒ‡æ ‡
```python
agent_metrics = {
    "uav_metrics": {
        "average_flight_time": mean(uav.flight_time for uav in uavs),
        "energy_efficiency": mean(uav.tasks_completed / uav.energy_consumed),
        "charging_frequency": mean(uav.charging_count),
        "task_success_rate": mean(uav.successful_tasks / uav.assigned_tasks)
    },
    "usv_metrics": {
        "support_response_time": mean(usv.response_times),
        "support_efficiency": mean(usv.successful_supports / usv.energy_consumed),
        "availability_rate": mean(usv.available_time / total_time),
        "coverage_area": mean(usv.coverage_radius)
    }
}
```

## ğŸ› ï¸ å®ç°è®¡åˆ’

### é˜¶æ®µ1: åŸºç¡€æ¶æ„ (Week 1-2)
- [ ] å®ç°`EnergyAwareTaskAllocator`åŸºç¡€ç±»
- [ ] æˆæœ¬çŸ©é˜µæ„å»ºç®—æ³•
- [ ] æ”¹è¿›çš„åŒˆç‰™åˆ©ç®—æ³•å®ç°
- [ ] åŸºç¡€èƒ½æºçº¦æŸæ£€æŸ¥

### é˜¶æ®µ2: USVè°ƒåº¦ (Week 3-4)  
- [ ] å®ç°`USVLogisticsScheduler`ç±»
- [ ] æ”¯æ´æ•ˆç›Šè®¡ç®—ç®—æ³•
- [ ] USVè‡ªèº«ç”µé‡ç®¡ç†é€»è¾‘
- [ ] å¤šUSVåè°ƒæœºåˆ¶

### é˜¶æ®µ3: å……ç”µå†³ç­– (Week 5-6)
- [ ] å®ç°`ChargingDecisionMaker`ç±»
- [ ] å¤šå› å­è¯„åˆ†æ¨¡å‹
- [ ] æ’é˜Ÿæ—¶é—´é¢„æµ‹ç®—æ³•
- [ ] åŠ¨æ€é˜ˆå€¼è°ƒæ•´æœºåˆ¶

### é˜¶æ®µ4: åŠ¨æ€é‡è°ƒåº¦ (Week 7-8)
- [ ] å®ç°`DynamicReallocator`ç±»
- [ ] äº‹ä»¶è§¦å‘æœºåˆ¶
- [ ] å±€éƒ¨vså…¨å±€è°ƒåº¦å†³ç­–
- [ ] å¹³æ»‘è¿‡æ¸¡ç®—æ³•

### é˜¶æ®µ5: é›†æˆæµ‹è¯• (Week 9-10)
- [ ] ç³»ç»Ÿé›†æˆå’Œæ¥å£è”è°ƒ
- [ ] æ€§èƒ½æµ‹è¯•å’Œå‚æ•°è°ƒä¼˜
- [ ] å¯è§†åŒ–ç³»ç»Ÿé›†æˆ
- [ ] æ–‡æ¡£å®Œå–„å’Œä»£ç å®¡æŸ¥

## ğŸ“ é…ç½®å‚æ•°è®¾è®¡

### æ ¸å¿ƒå‚æ•°é…ç½®
```yaml
# èƒ½æºæ„ŸçŸ¥ä»»åŠ¡åˆ†é…å™¨é…ç½®
energy_aware_allocator:
  cost_weights:
    distance: 0.3
    energy: 0.4  
    time: 0.2
    risk: 0.1
  safety_margin: 0.25  # 25%å®‰å…¨ä½™é‡
  max_tasks_per_uav: 5
  energy_threshold: 0.15  # 15%ç”µé‡é˜ˆå€¼

# USVåå‹¤è°ƒåº¦å™¨é…ç½®  
usv_logistics:
  support_benefit_weights:
    task_value: 0.4
    energy_cost: 0.3
    time_cost: 0.2
    distance_cost: 0.1
  min_reserve_energy_ratio: 0.3  # 30%é¢„ç•™ç”µé‡
  max_support_distance: 5000  # 5kmæœ€å¤§æ”¯æ´è·ç¦»

# å……ç”µå†³ç­–å™¨é…ç½®
charging_decision:
  decision_factors:
    distance: 0.3
    queue_time: 0.25
    availability: 0.25  
    urgency: 0.2
  queue_prediction_window: 900  # 15åˆ†é’Ÿé¢„æµ‹çª—å£
  emergency_threshold: 0.1  # 10%ç´§æ€¥ç”µé‡é˜ˆå€¼

# åŠ¨æ€é‡è°ƒåº¦å™¨é…ç½®
dynamic_reallocator:
  trigger_thresholds:
    critical_energy: 0.15
    performance_degradation: 0.2
    load_imbalance: 0.3
  reallocation_interval: 900  # 15åˆ†é’Ÿå‘¨æœŸæ€§æ£€æŸ¥
  smooth_transition_steps: 3  # 3æ­¥å¹³æ»‘è¿‡æ¸¡
```

## ğŸ” æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- æˆæœ¬å‡½æ•°è®¡ç®—å‡†ç¡®æ€§
- çº¦æŸæ£€æŸ¥é€»è¾‘æ­£ç¡®æ€§  
- å„ç®—æ³•æ¨¡å—ç‹¬ç«‹åŠŸèƒ½

### é›†æˆæµ‹è¯•
- å¤šå±‚ç®—æ³•åè°ƒå·¥ä½œ
- æ•°æ®æµä¼ é€’æ­£ç¡®æ€§
- å¼‚å¸¸æƒ…å†µå¤„ç†

### æ€§èƒ½æµ‹è¯•
- å¤§è§„æ¨¡åœºæ™¯ä¸‹çš„å®æ—¶æ€§
- å†…å­˜ä½¿ç”¨å’Œè®¡ç®—å¤æ‚åº¦
- é•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§

### åœºæ™¯æµ‹è¯•
- æç«¯ç”µé‡æƒ…å†µ
- è®¾å¤‡æ•…éšœæ¢å¤
- é«˜è´Ÿè½½å‹åŠ›æµ‹è¯•

## ğŸš€ é¢„æœŸæ•ˆæœ

### æ€§èƒ½æå‡ç›®æ ‡
- ä»»åŠ¡å®Œæˆç‡: 95%+ (ç›¸æ¯”ç°æœ‰ç³»ç»Ÿæå‡15%)
- èƒ½æºåˆ©ç”¨æ•ˆç‡: æå‡25%
- å¹³å‡ä»»åŠ¡å®Œæˆæ—¶é—´: å‡å°‘20%
- ç³»ç»Ÿå“åº”æ—¶é—´: <5ç§’(99%çš„æƒ…å†µä¸‹)
- UAVä»»åŠ¡è´Ÿè½½: å¹³å‡3-4ä¸ªä»»åŠ¡/UAVï¼ˆv2.0æå‡ï¼‰

### æŠ€æœ¯åˆ›æ–°ç‚¹
1. **å¤šç›®æ ‡è‡ªé€‚åº”ä¼˜åŒ–**ï¼šåŠ¨æ€è°ƒæ•´æƒé‡é€‚åº”ä¸åŒåœºæ™¯
2. **æ™ºèƒ½åå‹¤è°ƒåº¦**ï¼šUSVæ”¯æ´æ•ˆç›Šæœ€å¤§åŒ–ç®—æ³•
3. **é¢„æµ‹æ€§å……ç”µå†³ç­–**ï¼šåŸºäºæ’é˜Ÿé¢„æµ‹çš„æ™ºèƒ½é€‰æ‹©
4. **å¹³æ»‘åŠ¨æ€é‡è°ƒåº¦**ï¼šæœ€å°åŒ–ç³»ç»Ÿæ‰°åŠ¨çš„é‡è§„åˆ’
5. **å¤šä»»åŠ¡é“¾èƒ½è€—ä¼˜åŒ–**ï¼šæ”¯æŒUAVæ‰§è¡Œä»»åŠ¡åºåˆ—ï¼ˆv2.0æ–°å¢ï¼‰

## ğŸ“š å‚è€ƒæ–‡çŒ®ä¸ç›¸å…³æŠ€æœ¯

### ç®—æ³•åŸºç¡€
- Hungarian Algorithm for Assignment Problems
- Multi-Objective Optimization in UAV Path Planning
- Dynamic Programming for Vehicle Routing
- Heuristic Decision Trees for Real-time Systems

### ç›¸å…³å¼€æºé¡¹ç›®
- SUMO (Simulation of Urban MObility)
- ArduPilot Mission Planner
- ROS Navigation Stack
- OMPL (Open Motion Planning Library)

---

**æ–‡æ¡£ç»´æŠ¤è¯´æ˜**ï¼š
- æœ¬æ–‡æ¡£åº”éšç€å®ç°è¿›åº¦å®æ—¶æ›´æ–°
- é‡è¦è®¾è®¡å˜æ›´éœ€è¦ç‰ˆæœ¬è®°å½•
- ç®—æ³•æ€§èƒ½æ•°æ®éœ€è¦æŒç»­è¡¥å……
- é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆéœ€è¦åŠæ—¶è®°å½•

**æœ€åæ›´æ–°**: 2025-06-22

## ğŸ“ ç‰ˆæœ¬æ›´æ–°è®°å½•

### v2.0 (2025-06-22)
- **é‡å¤§æ”¹è¿›**: Layer 1ç®—æ³•ä»åŒˆç‰™åˆ©ç®—æ³•æ”¹ä¸ºè´ªå¿ƒå¤šä»»åŠ¡åˆ†é…ç®—æ³•
- **æ–°å¢åŠŸèƒ½**: æ”¯æŒä¸€ä¸ªUAVæ‰§è¡Œå¤šä¸ªä»»åŠ¡çš„ä»»åŠ¡é“¾
- **ä¼˜åŒ–**: ä»»åŠ¡é“¾èƒ½è€—è®¡ç®—å’Œç´¯ç§¯çº¦æŸæ£€æŸ¥
- **ä¿®å¤**: è§£å†³äº†UAVåªèƒ½åˆ†é…ä¸€ä¸ªä»»åŠ¡çš„é™åˆ¶

### v1.0 (2025-06-22)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- 4å±‚ä¼˜åŒ–æ¶æ„è®¾è®¡
- åŸºäºåŒˆç‰™åˆ©ç®—æ³•çš„ä»»åŠ¡åˆ†é…